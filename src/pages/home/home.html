<ion-header>
  <ion-navbar class="header-white">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Home</ion-title>
  </ion-navbar>

  <ion-searchbar 
    [(ngModel)]="search"
    (ionInput)="onInput($event)">
  </ion-searchbar>
</ion-header>

<ion-content>
  

  <ion-fab bottom right>
    <button (click)="addProduto()" ion-fab mini><ion-icon name="add"></ion-icon></button>
    <!--ion-fab-list>
      <button ion-fab><ion-icon name="logo-facebook"></ion-icon></button>
      <button ion-fab><ion-icon name="logo-twitter"></ion-icon></button>
      <button ion-fab><ion-icon name="logo-vimeo"></ion-icon></button>
      <button ion-fab><ion-icon name="logo-googleplus"></ion-icon></button>
    </ion-fab-list-->
  </ion-fab>

  <ion-card *ngFor="let p of produtos$ | async">
    <ion-card-header>
      <ion-row>
        <ion-col>
          <button (click)="hidden(p)" ion-button clear>
            <ion-icon name="book"></ion-icon> {{p.nome}}
          </button>
        </ion-col>
        
        <ion-col>
          <ion-buttons right>
            <button ion-button clear (click)="editProduto(p)">
              <ion-icon name="create"></ion-icon>
            </button>
            <button ion-button clear (click)="removeProduto(p)">
              <ion-icon name="trash"></ion-icon>
            </button>
          </ion-buttons>
        </ion-col>
      </ion-row>
    </ion-card-header>

    <ion-card-content [hidden]="!p.show">
      <ion-row>
        <ion-col>
          <ion-label class="label-detail">{{p.custo[0].loja}}</ion-label>
          <button ion-button clear block>
            {{p.custo[0].valor | format}}
          </button>
        </ion-col>

        <ion-col>
          <ion-label class="label-detail">Quantidade em estoque</ion-label>
          <button ion-button clear block (click)="editProduto(p,'Quantidade em estoque', 'qtn', 'Quantidade', 'text', p.qtn)">
            {{p.qtn}}
          </button>
        </ion-col>

        <ion-col>
          <ion-label class="label-detail">Quantidade mínima</ion-label>
          <button ion-button clear block (click)="editProduto(p,'Quantidade mínima', 'qtn_min', 'Quantidade', 'text', p.qtn)">
            {{p.qtn_min}}
          </button>
        </ion-col>
      </ion-row>
      
      <ion-row>
        <ion-label class="label-detail">Categoria</ion-label>
        <button ion-button block clear>
          {{p.categoria}}
        </button>
      </ion-row>
    </ion-card-content>
  </ion-card>

</ion-content>
